webpackJsonp([1],{437:function(e,t){},0:function(e,t,n){try{(function(){"use strict";function e(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}n(437);var t=e("type"),o=e("id"),i=e("code"),a=e("url"),r={type:t,id:o,code:i,rsm:{name:2},isSuccess:!0,errMsg:"",login:{checkCodeStatus:0,isAgree:!0,data:{telphone:"",validCode:"",password:"",invite_code:i,agree_deal:1}}};"course"===t&&(document.title="妈妈托-课程分享",r.type="course"),"inviteCode"===t&&(document.title="妈妈托-注册",r.type="login"),"login"===t&&(document.title="妈妈托-注册",r.type="login"),"loginSuccess"===t&&(document.title="妈妈托-注册成功",r.type="loginSuccess"),"loginFail"===t&&(document.title="妈妈托-注册失败",r.type="loginFail");new Vue({el:"#content",data:function(){return r},created:function(){var e=this;this.rsm.name=3,"course"===t&&$.get("/admin/api/course/share_view/",{id:o},function(t){t.errno===-1?(e.isSuccess=!1,e.errMsg=t.err):e.$set(r,"rsm",t.rsm.info)},"json")},beforeUpdate:function(){document.getElementById("content").style.display="block"},methods:{open:function(){var e=this;if(!a)return void alert("url 为空");var t=document.createElement("iframe");t.src=a+"&courseId="+o,t.style.display="none",document.body.appendChild(t),window.setTimeout(function(){alert("打开失败："+t.src),document.body.removeChild(t),e.download()},1e3)},download:function(){var e=navigator.userAgent;e.indexOf("Android")>-1||e.indexOf("Adr")>-1,!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},linkToLogin:function(){window.location="share.html?type=login&code="+i},linkToLoginSuccess:function(){window.location="share.html?type=loginSuccess"},linkToLoginFail:function(){window.location="share.html?type=loginFail"},validTiming:function(){var e=this;setTimeout(function(){r.login.checkCodeStatus=r.login.checkCodeStatus-1,r.login.checkCodeStatus>0&&e.validTiming()},1e3)},getValidCode:function(){var e=this;$.ajax({url:"/app/api1.0/login/get_validcode/",type:"post",data:{telphone:r.login.data.telphone,types:1},dataType:"json",success:function(t){t.errno===-1?alert(t.err):(r.login.checkCodeStatus=60,e.validTiming())}})},signUp:function(){var e=this,t=r.login.data;return""===t.telphone?void alert("请输入手机号"):""===t.validCode?void alert("请输入验证码"):""===t.password?void alert("请设置密码"):void $.ajax({url:"/app/api1.0/login/get_user_register/",type:"post",data:t,dataType:"json",success:function(t){t.errno===-1?"你输入的手机号码已经存在"===t.err?e.linkToLoginFail():alert(t.err):e.linkToLoginSuccess()}})},toggleAgree:function(){0===this.login.data.agree_deal?this.login.data.agree_deal=1:this.login.data.agree_deal=0}},computed:{teacherStar:function(){if(r.rsm.teacher_star){for(var e=Math.floor(r.rsm.teacher_star),t=r.rsm.teacher_star%e,n=[],o=0;o<5;o+=1)o<e?n.push(1):0!==t&&o===e&&t>1e-4?n.push(t):n.push(0);return n}return[]},validMsg:function(){return 0===r.login.checkCodeStatus?"获取验证码":r.login.checkCodeStatus+"s后重新获取"}}})}).call(this)}finally{}}});